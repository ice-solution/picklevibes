# Picklevibes UAT 環境

## 簡介

這是 Picklevibes 的 UAT（用戶驗收測試）環境，用於在正式發布到生產環境之前進行最終測試和驗證。

## 環境信息

- **環境名稱**: UAT
- **分支**: `uat`
- **前端URL**: https://uat.picklevibes.hk
- **API URL**: https://api-uat.picklevibes.hk
- **狀態**: 🟢 活躍

## 訪問信息

### 測試帳號

| 角色 | 電子郵件 | 密碼 | 用途 |
|------|---------|------|------|
| 管理員 | admin@picklevibes.hk | Test@1234 | 測試管理功能 |
| VIP用戶 | vip@picklevibes.hk | Test@1234 | 測試VIP功能 |
| 普通用戶 | user@picklevibes.hk | Test@1234 | 測試基本功能 |

### Stripe 測試卡號

使用以下測試卡號進行支付測試：

| 卡號 | 用途 |
|------|------|
| 4242 4242 4242 4242 | 成功支付 |
| 4000 0000 0000 0002 | 支付失敗 |
| 4000 0025 0000 3155 | 需要3D驗證 |

**卡片詳情:**
- 到期日期: 任何未來日期
- CVC: 任意3位數字
- 郵遞區號: 任意5位數字

## 功能範圍

UAT 環境包含所有生產環境的功能：

### 用戶功能
- ✅ 用戶註冊和登入
- ✅ 場地瀏覽和預約
- ✅ 積分充值和管理
- ✅ VIP會員升級
- ✅ 優惠碼使用
- ✅ 預約記錄查看
- ✅ 個人資料管理

### 管理功能
- ✅ 預約管理（查看、修改、取消）
- ✅ 場地管理（啟用/停用）
- ✅ 用戶管理
- ✅ 優惠碼管理
- ✅ 充值記錄管理
- ✅ 日曆視圖
- ✅ 統計報表

### 支付功能
- ✅ Stripe 積分充值
- ✅ 積分扣除系統
- ✅ VIP折扣計算
- ✅ 優惠碼折扣

### 通知功能
- ✅ WhatsApp 預約通知（測試環境）
- ✅ 電子郵件通知

## 測試指南

### 測試流程

1. **用戶註冊和登入測試**
   - 註冊新用戶
   - 登入測試帳號
   - 測試忘記密碼功能

2. **預約流程測試**
   - 選擇日期和時間
   - 選擇場地類型
   - 填寫玩家信息
   - 使用積分支付
   - 查看預約確認

3. **充值功能測試**
   - 選擇充值金額
   - 使用測試信用卡支付
   - 確認積分到帳
   - 測試充值記錄

4. **VIP功能測試**
   - 升級VIP會員
   - 測試20%預約折扣
   - 查看會員到期日期

5. **優惠碼測試**
   - 創建優惠碼（管理員）
   - 使用優惠碼預約
   - 測試使用限制
   - 測試過期優惠碼

6. **管理功能測試**
   - 查看所有預約
   - 修改預約狀態
   - 啟用/停用場地
   - 查看用戶列表
   - 管理優惠碼

### 測試檢查清單

使用以下檢查清單確保所有功能正常：

- [ ] 用戶註冊功能
- [ ] 用戶登入功能
- [ ] 場地列表顯示
- [ ] 時間段可用性檢查
- [ ] 預約創建
- [ ] 積分扣除
- [ ] VIP折扣計算
- [ ] 優惠碼應用
- [ ] 充值流程
- [ ] Stripe支付
- [ ] WhatsApp通知
- [ ] 預約取消
- [ ] 管理員登入
- [ ] 預約管理
- [ ] 場地管理
- [ ] 用戶管理
- [ ] 優惠碼管理
- [ ] 響應式設計（手機/平板/桌面）
- [ ] 多語言切換（中文/英文）

### 性能測試

- 頁面加載時間 < 3秒
- API響應時間 < 500ms
- 並發用戶支持: 50+

### 瀏覽器兼容性

測試以下瀏覽器：
- Chrome (最新版本)
- Safari (最新版本)
- Firefox (最新版本)
- Edge (最新版本)
- 手機瀏覽器 (iOS Safari, Chrome Mobile)

## 已知限制

1. **數據隔離**: UAT環境使用獨立的數據庫，不會影響生產數據
2. **第三方服務**: 使用測試環境的API密鑰
3. **性能**: UAT服務器配置可能低於生產環境
4. **數據保留**: UAT數據可能會定期清理

## 報告問題

如果發現任何問題，請通過以下方式報告：

### GitHub Issues
1. 訪問: https://github.com/ice-solution/picklevibes/issues
2. 點擊 "New Issue"
3. 選擇 "Bug Report" 模板
4. 填寫問題詳情
5. 添加標籤: `uat`, `bug`

### 問題報告模板

```markdown
**環境**: UAT
**瀏覽器**: Chrome 120.0
**重現步驟**:
1. 
2. 
3. 

**預期結果**:

**實際結果**:

**截圖**:

**額外信息**:
```

### 聯繫方式

- **技術支援**: tech@picklevibes.hk
- **項目經理**: pm@picklevibes.hk

## 部署信息

### 最後部署
- 日期: 2025-01-12
- 版本: v1.0.0-uat
- 提交: f386c34

### 部署歷史

查看完整的部署歷史：
```bash
git log --oneline --graph uat
```

### 回滾程序

如果需要回滾到之前的版本：

```bash
# SSH登入UAT服務器
ssh user@uat.picklevibes.hk

# 進入應用目錄
cd /var/www/picklevibes-uat

# 查看可用的備份
ls -la backups/

# 回滾到特定備份
./rollback-uat.sh 20250112_1430
```

## 數據管理

### 重置測試數據

如果需要重置UAT環境的測試數據：

```bash
# 聯繫DevOps團隊執行
# 或使用管理腳本
node server/scripts/reset-uat-data.js
```

### 導入測試數據

```bash
# 導入預設的測試數據
node server/scripts/import-test-data.js
```

## 監控和日誌

### 應用監控

- **PM2 Dashboard**: `pm2 monit`
- **日誌查看**: `pm2 logs picklevibes-uat`
- **狀態檢查**: `pm2 status`

### 錯誤追蹤

所有錯誤會記錄在：
- 應用日誌: `/var/www/picklevibes-uat/logs/`
- PM2日誌: `~/.pm2/logs/`

### 性能指標

關鍵指標監控：
- CPU使用率
- 內存使用率
- API響應時間
- 錯誤率

## 安全注意事項

⚠️ **重要提醒**:

1. **不要使用真實的支付信息** - 僅使用Stripe提供的測試卡號
2. **不要分享測試帳號** - 測試帳號僅供內部使用
3. **保護敏感信息** - 不要在UAT環境中使用真實用戶數據
4. **定期更改密碼** - 定期更新測試帳號密碼

## 升級到生產環境

當UAT測試通過後，按以下步驟升級到生產環境：

1. **代碼審查**: 確保所有代碼已經過審查
2. **測試確認**: 所有測試案例通過
3. **合併代碼**: 將 `uat` 分支合併到 `main`
4. **創建Release**: 在GitHub創建新的Release
5. **生產部署**: 觸發生產環境部署流程
6. **驗證**: 在生產環境進行最終驗證

## 維護窗口

UAT環境可能會在以下時間進行維護：
- **每週**: 週日 02:00-04:00 (HKT)
- **緊急維護**: 會提前在Slack通知

## 參考文檔

- [完整部署指南](./UAT_DEPLOYMENT_GUIDE.md)
- [API文檔](./API_DOCUMENTATION.md)
- [測試計劃](./QA_Test_Plan.md)
- [項目README](./README.md)

## 更新日誌

### v1.0.0-uat (2025-01-12)
- ✨ 新增場地管理功能
- ✨ 新增預約日曆視圖
- ✨ 新增預約管理組件
- 🐛 修復時間段檢查bug
- 🐛 修復Saturday/Sunday時段計算問題

---

最後更新: 2025-01-12
維護者: Picklevibes DevOps Team

